import{html,$,$$}from'../core/dom.js';const DATA=[{id:1,titulo:'Reforço escolar',cat:'educacao',tags:['Educação','Crianças','Inclusão'],img:'project1',alt:'Aula comunitária com materiais didáticos'},{id:2,titulo:'Prevenção e bem-estar',cat:'saude',tags:['Saúde','Prevenção','Comunidade'],img:'project2',alt:'Ação de saúde preventiva na comunidade'}];function card(p){return html`<article class='card' data-cat='${p.cat}' data-title='${p.titulo.toLowerCase()}'><picture><source srcset='assets/img/${p.img}-800.webp 800w, assets/img/${p.img}-400.webp 400w' type='image/webp'><source srcset='assets/img/${p.img}-800.jpg 800w, assets/img/${p.img}-400.jpg 400w' type='image/jpeg'><img src='assets/img/${p.img}-400.jpg' srcset='assets/img/${p.img}-400.jpg 400w, assets/img/${p.img}-800.jpg 800w' sizes='(max-width: 700px) 400px, 800px' width='800' height='500' alt='${p.alt}' loading='lazy' decoding='async'></picture><h3>${p.titulo}</h3><p>${p.cat==='educacao'?'Bibliotecas itinerantes e apoio pedagógico.':'Campanhas e oficinas de hábitos saudáveis.'}</p><p>${p.tags.map(t=>`<span class='tag'>${t}</span>`).join('')}</p><p><a class='btn' href='#/cadastro'>Quero participar</a></p></article>`;}export default function projetos(q){const filtro=(q&&q.cat)||'todos';const t=html`<section class='container'><header class='mb-16'><h1>Projetos Sociais</h1><p>Conheça nossas iniciativas e como participar.</p></header><div class='row'><div class='span-12 md-span-6'><label for='q'>Buscar</label><input id='q' type='search' placeholder='Filtrar por título ou tag…'></div><div class='span-12 md-span-6'><label for='cat'>Categoria</label><select id='cat'><option value='todos'>Todas</option><option value='educacao'>Educação</option><option value='saude'>Saúde</option></select></div></div><div id='grid' class='grid-3 mt-24'>${DATA.map(card).join('')}</div></section>`;function afterRender(){const q=$('#q');const cat=$('#cat');const grid=$('#grid');cat.value=filtro;function apply(){const term=(q.value||'').toLowerCase();const category=cat.value;$$('.card',grid).forEach(k=>{const title=k.dataset.title||'';const inTitle=title.includes(term);const inTags=Array.from(k.querySelectorAll('.tag')).some(t=>t.textContent.toLowerCase().includes(term));const catMatch=category==='todos'||k.dataset.cat===category;k.style.display=(catMatch&&(term===''||inTitle||inTags))?'':'none';});}q.addEventListener('input',apply);cat.addEventListener('change',apply);apply();}return{template:t,afterRender};}